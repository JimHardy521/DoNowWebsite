<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
 <title>GCSE Maths Do Now Questions | Free Do Nows with Further Practice and Revision</title>
<meta name="description" content="Generate free Maths Do Now questions with instant solutions. Perfect for Do Nows, revision, and practice for GCSE, A Level and Level 2 Further Maths.">

<!-- Open Graph (sharing + indirect SEO) -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="GCSE Maths Do Now Questions">
  <meta property="og:description" content="Generate free Maths Do Now questions with instant solutions. Perfect for maths Do Nows, revision, and practice for GCSE, A Level and Level 2 Further Maths.">
  <meta property="og:url" content="https://mrhardymaths.co.uk/index.html">


<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">

<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="gcseQuestions.js"></script>
<script src="common.js"></script>

<style>
body {
  font-family: 'Inter', sans-serif;
  margin: 0;
  background-color: #f0f4f8;
  color: #333;
}

.instructions {
  text-align: center;
  margin: 10px 0 14px;
  font-size: 0.95rem;
  color: #444;
}

.instructions label {
  cursor: pointer;
  font-weight: 600;
}

/* ---------- TIMER BADGE ---------- */
.timer {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 10px;
  border-radius: 999px;
  background: #e8eef5;
  font-weight: 600;
  cursor: pointer;
  user-select: none;
}

#timeDisplay::before {
  content: "⏱️ ";
}

.timer-controls {
  display: inline-flex;
  gap: 6px;
  max-width: 0;
  overflow: hidden;
  transition: max-width 0.3s ease;
}

.timer.open .timer-controls {
  max-width: 240px;
}

.timer-controls button {
  border: none;
  background: #d9e2ec;
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
}

.timer-controls button:hover {
  background: #cbd5e1;
}

/* ---------- BUTTON BAR LAYOUT ---------- */
.button-bar {
  display: flex;
  justify-content: center;
  margin-bottom: 10px;
}

.button-group {
  display: flex;
  align-items: center;
  gap: 10px;
}

.button-bar .timer {
  grid-column: 3;
  justify-self: end;
}


</style>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SMPS7RQ5T8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SMPS7RQ5T8');
</script>


</head>

<body>

<h1>GCSE Maths</h1>


<div class="instructions">
  Click on each question to reveal the solution, or
  <label>
    <input type="checkbox" id="revealAll">
    <span id="toggleText">Reveal all solutions</span>
  </label>
</div>


<div class="button-bar">
  <div class="button-group">

    <!-- Timer -->
    <div id="timerBadge" class="timer">
      <span id="timeDisplay">05:00</span>
      <div class="timer-controls">
        <button id="minusMin">–</button>
        <button id="plusMin">+</button>
        <button id="startPause">Start</button>
        <button id="resetTimer">Reset</button>
      </div>
    </div>

    <select id="levelSelect">
      <option value="Foundation">Foundation</option>
      <option value="Crossover">Crossover</option>
      <option value="Higher" selected>Higher</option>
    </select>

    <button onclick="loadQuestions()">New Do Now</button>
    <button onclick="printQuestions()">Print Do Now</button>
    <button onclick="openRevisionBuilder()">Create Revision Worksheet</button>
  </div>
</div>




<div id="questions"></div>

<hr>

<p style="text-align:center;font-weight:700;">
  Create a Do Now Using Specific Topics:
</p>

<div class="topic-toolbar">
  <div class="topic-wrapper">
    <label>Question 1 Topic</label>
    <select id="topic1"></select>
  </div>
  <div class="topic-wrapper">
    <label>Question 2 Topic</label>
    <select id="topic2"></select>
  </div>
  <div class="topic-wrapper">
    <label>Question 3 Topic</label>
    <select id="topic3"></select>
  </div>
  <div class="topic-wrapper">
    <label>Question 4 Topic</label>
    <select id="topic4"></select>
  </div>
  <div class="topic-wrapper">
    <button onclick="loadTopicQuestions()">Load Do Now</button>
    <button onclick="copyTopicURL()">Copy Topic Link</button>
  </div>
</div>

<script>
// ---------- UTIL ----------
function randomFrom(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function getLevel() {
  return document.getElementById("levelSelect").value;
}

// ---------- TOPICS ----------
function populateTopics() {
  const level = getLevel();
  const topics = [...new Set(
    gcseQuestions.filter(q => q.level === level).map(q => q.topic)
  )].sort((a,b) => a.localeCompare(b));

  ["topic1","topic2","topic3","topic4"].forEach(id => {
    const sel = document.getElementById(id);
    sel.innerHTML = "";
    topics.forEach(t => {
      const o = document.createElement("option");
      o.value = t;
      o.textContent = t;
      sel.appendChild(o);
    });
  });
}

document.getElementById("levelSelect").addEventListener("change", () => {
  populateTopics();
  loadQuestions();
});

// ---------- QUESTION BOX ----------
function createBox(q, index) {
  const box = document.createElement("div");
  box.className = "question-box";
  box.dataset.topic = q.topic;

  const h = document.createElement("div");
  h.className = "question-header";
  h.innerHTML = `Question ${index + 1}: ${q.topic}`;
  box.appendChild(h);

  const qt = document.createElement("div");
  qt.innerHTML = q.question;
  box.appendChild(qt);

  const sol = document.createElement("div");
  sol.className = "solution";
  sol.style.display = "none";
  sol.innerHTML = `<strong>Solution:</strong> ${q.solution}`;
  box.appendChild(sol);

  box.onclick = () => {
    sol.style.display = sol.style.display === "none" ? "block" : "none";
  };

  // ↻ Any-topic refresh
  const rAny = document.createElement("div");
  rAny.className = "refresh-btn";
  rAny.innerHTML = "↻";
  rAny.title = "New random question";
  rAny.onclick = e => {
    e.stopPropagation();
    const pool = gcseQuestions.filter(q => q.level === getLevel());
    let nq;
    do {
      nq = randomFrom(pool);
    } while (nq.question === qt.innerHTML && pool.length > 1);

    qt.innerHTML = nq.question;
    sol.innerHTML = `<strong>Solution:</strong> ${nq.solution}`;
    sol.style.display = "none";

    h.innerHTML = `Question ${index + 1}: ${nq.topic}`;
    box.dataset.topic = nq.topic;
    MathJax.typeset();
  };
  box.appendChild(rAny);

  // ↺ Same-topic refresh
  const rSame = document.createElement("div");
  rSame.className = "refresh-btn refresh-same";
  rSame.innerHTML = "↺";
  rSame.title = "New question from same topic";
  rSame.onclick = e => {
    e.stopPropagation();
    const pool = gcseQuestions.filter(
      x => x.level === getLevel() && x.topic === box.dataset.topic
    );
    if (pool.length < 2) return;

    let nq;
    do {
      nq = randomFrom(pool);
    } while (nq.question === qt.innerHTML);

    qt.innerHTML = nq.question;
    sol.innerHTML = `<strong>Solution:</strong> ${nq.solution}`;
    sol.style.display = "none";

    MathJax.typeset();
  };
  box.appendChild(rSame);

  // ➤ Practice topic
  const practice = document.createElement("div");
  practice.className = "refresh-btn practice-topic";
  practice.innerHTML = "➤";
  practice.title = "Practice this topic further";
  practice.onclick = e => {
    e.stopPropagation();
    const url = `practice.html?topic=${encodeURIComponent(box.dataset.topic)}&source=gcse`;
    window.open(url, "_blank");
  };
  box.appendChild(practice);

  document.getElementById("questions").appendChild(box);
}

// ---------- LOAD RANDOM ----------
function loadQuestions() {
  document.getElementById("questions").innerHTML = "";
  document.getElementById("revealAll").checked = false;
  toggleAllSolutions(false);

  const level = getLevel();
  const pool = gcseQuestions.filter(q => q.level === level);

  // Group questions by topic
  const byTopic = {};
  pool.forEach(q => {
    if (!byTopic[q.topic]) byTopic[q.topic] = [];
    byTopic[q.topic].push(q);
  });

  const topics = Object.keys(byTopic);

  // If fewer than 4 topics exist, fall back to old behaviour
  if (topics.length < 4) {
    for (let i = 0; i < 4; i++) {
      createBox(randomFrom(pool), i);
    }
    MathJax.typeset();
    return;
  }

  // Shuffle topics and take 4 distinct ones
  topics.sort(() => Math.random() - 0.5);
  const chosenTopics = topics.slice(0, 4);

  chosenTopics.forEach((topic, i) => {
    const q = randomFrom(byTopic[topic]);
    createBox(q, i);
  });

  MathJax.typeset();
}

// ---------- LOAD BY TOPIC ----------
function loadTopicQuestions() {
  document.getElementById("questions").innerHTML = "";
  document.getElementById("revealAll").checked = false;
  toggleAllSolutions(false);

  ["topic1","topic2","topic3","topic4"].forEach((id, i) => {
    const topic = document.getElementById(id).value;
    const pool = gcseQuestions.filter(
      q => q.level === getLevel() && q.topic === topic
    );
    if (pool.length) createBox(randomFrom(pool), i);
  });
  MathJax.typeset();
}

// ---------- REVEAL ALL ----------
function toggleAllSolutions(show) {
  document.querySelectorAll(".solution").forEach(s => {
    s.style.display = show ? "block" : "none";
  });
  document.getElementById("toggleText").textContent =
    show ? "Hide all solutions" : "Reveal all solutions";
}

document.getElementById("revealAll").onchange = e =>
  toggleAllSolutions(e.target.checked);

// ---------- COPY TOPIC LINK ----------
function copyTopicURL() {
  const params = new URLSearchParams({
    level: getLevel(),
    t1: topic1.value,
    t2: topic2.value,
    t3: topic3.value,
    t4: topic4.value
  });

  const url = window.location.origin + window.location.pathname + "?" + params;
  navigator.clipboard.writeText(url).then(() =>
    alert( "This website address has been copied to your clipboard. Paste this into a new window to pracice the same Do Now Topics")
  );
}

// ---------- LOAD FROM URL ----------
function loadFromURLIfPresent() {
  const params = new URLSearchParams(window.location.search);
  let used = false;

  if (params.get("level")) {
    levelSelect.value = params.get("level");
  }

  populateTopics();

  ["topic1","topic2","topic3","topic4"].forEach((id,i) => {
    const val = params.get(`t${i+1}`);
    const sel = document.getElementById(id);
    if (val && [...sel.options].some(o => o.value === val)) {
      sel.value = val;
      used = true;
    }
  });

  if (used) loadTopicQuestions();
}

// ---------- PRINT ----------
function printQuestions() {
  const boxes = document.querySelectorAll(".question-box");
  let qs = [];

  boxes.forEach(b => {
    qs.push({
      header: b.querySelector(".question-header").innerHTML,
      question: b.children[1].innerHTML
    });
  });

  qs = qs.concat(qs);

  const win = window.open("", "_blank");
  win.document.write(`
  <html><head>
  <style>
    @page { size: A4; margin: 5mm; }
    body { font-family: Inter, Arial; }
    .page { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
    .box { border:1px solid black; padding:8px; min-height:190px; }
    .cut { border-top:2px dashed black; margin:10px 0; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>
  </head><body>
  <div class="page">
    ${qs.slice(0,4).map(q=>`<div class="box"><strong>${q.header}</strong><br>${q.question}</div>`).join("")}
  </div>
  <div class="cut"></div>
  <div class="page">
    ${qs.slice(4,8).map(q=>`<div class="box"><strong>${q.header}</strong><br>${q.question}</div>`).join("")}
  </div>
  </body></html>
  `);
  win.document.close();
  win.onload = () => win.MathJax.typesetPromise().then(()=>win.print());
}

// ---------- INIT ----------
populateTopics();
if (window.location.search) loadFromURLIfPresent();
else loadQuestions();
</script>

<script>
createNavBar();
</script>

<script>
function openRevisionBuilder() {
  const level = document.getElementById("levelSelect").value;
  const url = `revision.html?level=${encodeURIComponent(level)}`;
  window.open(url, "_blank");
}
</script>

<script>
let timerSeconds = 300;
let timerInterval = null;
let running = false;

const badge = document.getElementById("timerBadge");
const display = document.getElementById("timeDisplay");
const startPause = document.getElementById("startPause");

function updateDisplay() {
  const m = Math.floor(timerSeconds / 60);
  const s = timerSeconds % 60;
  display.textContent = `${m}:${s.toString().padStart(2, "0")}`;
}

badge.onclick = () => {
  badge.classList.toggle("open");
};

document.getElementById("plusMin").onclick = e => {
  e.stopPropagation();
  timerSeconds += 60;
  updateDisplay();
};

document.getElementById("minusMin").onclick = e => {
  e.stopPropagation();
  timerSeconds = Math.max(60, timerSeconds - 60);
  updateDisplay();
};

startPause.onclick = e => {
  e.stopPropagation();

  if (!running) {
    running = true;
    startPause.textContent = "Pause";
    timerInterval = setInterval(() => {
      if (timerSeconds > 0) {
        timerSeconds--;
        updateDisplay();
      } else {
        clearInterval(timerInterval);
        running = false;
        startPause.textContent = "Start";
      }
    }, 1000);
  } else {
    clearInterval(timerInterval);
    running = false;
    startPause.textContent = "Start";
  }
};

document.getElementById("resetTimer").onclick = e => {
  e.stopPropagation();
  clearInterval(timerInterval);
  timerSeconds = 300;
  running = false;
  startPause.textContent = "Start";
  updateDisplay();
};

updateDisplay();
</script>



</body>
</html>
